<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>React overview - TyrangYang_Blog</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://tyrangyang.github.io/TyrangYang_blog/react/">
<meta property="og:site_name" content="TyrangYang_Blog"><meta property="og:title" content="React overview"><meta property="og:description" content="Init react Commend
npx create-react-app . npx means you use this package but don’t download it.
or with redux
npx create-react-app my-app --template redux life cycle Class component lifecycle Function component method shouldComponentUpdate() Run before render() to check this component need to render or not.
shouldComponentUpdate(nextProps, nextStates){ return boolean; } PureComponent can automatically do a shallow comparison to determine need to update or not
export default React.memo(<component name>) only compare props but it works for functional component"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-03T00:00:00+00:00"><meta property="article:modified_time" content="2019-10-03T00:00:00+00:00"><meta property="article:tag" content="Web"><meta property="article:tag" content="React"><meta property="article:tag" content="Trick"><meta name=twitter:card content="summary"><meta name=twitter:title content="React overview"><meta name=twitter:description content="Init react Commend
npx create-react-app . npx means you use this package but don’t download it.
or with redux
npx create-react-app my-app --template redux life cycle Class component lifecycle Function component method shouldComponentUpdate() Run before render() to check this component need to render or not.
shouldComponentUpdate(nextProps, nextStates){ return boolean; } PureComponent can automatically do a shallow comparison to determine need to update or not
export default React.memo(<component name>) only compare props but it works for functional component"><meta name=twitter:site content="@TyrangYang"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://tyrangyang.github.io/TyrangYang_blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://tyrangyang.github.io/TyrangYang_blog/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://tyrangyang.github.io/TyrangYang_blog/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://tyrangyang.github.io/TyrangYang_blog/apple-touch-icon.png><link rel=mask-icon href=https://tyrangyang.github.io/TyrangYang_blog/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://tyrangyang.github.io/TyrangYang_blog/site.webmanifest><link rel=canonical href=https://tyrangyang.github.io/TyrangYang_blog/react/><link rel=prev href=https://tyrangyang.github.io/TyrangYang_blog/concurrent-programming-4/><link rel=next href=https://tyrangyang.github.io/TyrangYang_blog/cool-website-archive/><link rel=stylesheet href=https://tyrangyang.github.io/TyrangYang_blog/TyrangYang_blog/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"React overview","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/tyrangyang.github.io\/TyrangYang_blog\/react\/"},"genre":"posts","keywords":"web, react, trick","wordcount":2524,"url":"https:\/\/tyrangyang.github.io\/TyrangYang_blog\/react\/","datePublished":"2019-10-03T00:00:00+00:00","dateModified":"2019-10-03T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Haolin Yang"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=TyrangYang_Blog>TyrangYang_Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/posts/><i class='fas fa-book-open'></i> Posts </a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/tags/><i class='fas fa-tags'></i> Tags </a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/categories/><i class='fab fa-buffer'></i> Categories </a><a class=menu-item href=https://github.com/TyrangYang/TyrangYang_blog title="Blog github" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw fa-fw'></i> </a><a class=menu-item href=https://tyrangyang.github.io/ title="home page" rel="noopener noreffer" target=_blank><i class="fas fa-home"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=TyrangYang_Blog>TyrangYang_Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/posts/ title><i class='fas fa-book-open'></i> Posts</a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/tags/ title><i class='fas fa-tags'></i> Tags</a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/categories/ title><i class='fab fa-buffer'></i> Categories</a><a class=menu-item href=https://github.com/TyrangYang/TyrangYang_blog title="Blog github" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw fa-fw'></i> </a><a class=menu-item href=https://tyrangyang.github.io/ title="home page" rel="noopener noreffer" target=_blank><i class="fas fa-home"></i> </a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">React overview</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Haolin Yang</a></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2019-10-03>2019-10-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2524 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;12 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#init-react>Init react</a></li><li><a href=#life-cycle>life cycle</a><ul><li><a href=#shouldcomponentupdate>shouldComponentUpdate()</a></li><li><a href=#getsnapshotbeforeupdate>getSnapshotBeforeUpdate</a></li></ul></li><li><a href=#context-api>Context API</a></li><li><a href=#ref>Ref</a><ul><li><a href=#create-ref>create ref</a></li><li><a href=#access-ref>access ref</a></li><li><a href=#adding-a-ref-to-a-class-component>Adding a Ref to a Class Component</a></li><li><a href=#adding-a-ref-to-a-functional-component>Adding a Ref to a Functional Component</a><ul><li><a href=#useimperativehandle--forwardref>useImperativeHandle + ForwardRef</a></li></ul></li></ul></li><li><a href=#react-hooks>React Hooks</a><ul><li><a href=#usestate>useState</a></li><li><a href=#useeffect>useEffect</a></li><li><a href=#usecontext>useContext</a></li><li><a href=#usereducer>useReducer</a><ul><li><a href=#setstate-by-usereducer>setState by useReducer</a></li><li><a href=#relation-with-usestate>relation with useState,</a></li></ul></li><li><a href=#useref>useRef</a></li><li><a href=#uselayouteffect>useLayoutEffect</a></li><li><a href=#useimperativehandle>useImperativeHandle</a></li></ul></li><li><a href=#reactlazy>React.lazy()</a></li><li><a href=#class-component-vs-functional-component>Class Component vs Functional Component</a><ul><li><a href=#class-component-lifecycle--functional-component-hooks>Class Component lifecycle ==> Functional Component hooks</a></li></ul></li><li><a href=#logic-extraction>Logic extraction</a><ul><li><a href=#high-order-component>High-Order Component</a></li><li><a href=#render-props>Render props</a></li><li><a href=#customize-hooks>Customize Hooks</a></li></ul></li><li><a href=#common-pitfall>Common Pitfall</a><ul><li><a href=#performance-difference-snapshot-vs-current-value>Performance difference (SnapShot vs Current value)</a><ul><li><a href=#solution>Solution</a></li></ul></li><li><a href=#initial-state-from-props>Initial state from props</a></li></ul></li><li><a href=#trick>Trick</a><ul><li><a href=#inject-props-to-children>inject props to children</a></li></ul></li><li><a href=#react-posts-archive>React Posts Archive</a></li><li><a href=#structure>Structure</a><ul><li><a href=#packagejson>package.json</a></li><li><a href=#publicindexhtml>public/index.html</a></li><li><a href=#srcindexjs>src/index.js</a></li><li><a href=#srcappjs>src/App.js</a></li></ul></li><li><a href=#163--before-163>16.3 && before 16.3</a></li><li><a href=#debugging-hook>Debugging hook</a><ul><li><a href=#useprevious>usePrevious</a></li><li><a href=#useeffectdebugger>useEffectDebugger</a></li><li><a href=#usecallbackdebugger>useCallbackDebugger</a></li><li><a href=#usememodebugger>useMemoDebugger</a></li><li><a href=#usetraceupdate>useTraceUpdate</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=init-react>Init react</h2><p>Commend</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npx create-react-app .</span></span></code></pre></div></div><p>npx means you use this package but don&rsquo;t download it.</p><p>or with redux</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npx create-react-app my-app --template redux</span></span></code></pre></div></div><h2 id=life-cycle>life cycle</h2><figure><img src=https://tyrangyang.github.io/TyrangYang_blog/images/2019-10-03-react/rcc.png width=100% height=100%><figcaption><h4>Class component lifecycle</h4></figcaption></figure><figure><img src=https://tyrangyang.github.io/TyrangYang_blog/images/2019-10-03-react/rfc.jpg width=100% height=100%><figcaption><h4>Function component method</h4></figcaption></figure><h3 id=shouldcomponentupdate>shouldComponentUpdate()</h3><p>Run before <code>render()</code> to check this component need to render or not.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>shouldComponentUpdate</span><span class=p>(</span><span class=nx>nextProps</span><span class=p>,</span> <span class=nx>nextStates</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kr>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p><code>PureComponent</code> can automatically do a shallow comparison to determine need to update or not</p><p><code>export default React.memo(&lt;component name>)</code> only compare props but it works for functional component</p><h3 id=getsnapshotbeforeupdate>getSnapshotBeforeUpdate</h3><p>it is invoked right before the most recently rendered output is committed</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>getSnapshotBeforeUpdate</span><span class=p>(</span><span class=nx>prevProps</span><span class=p>,</span> <span class=nx>prevState</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;snapshot&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>prevProps</span><span class=p>,</span> <span class=nx>prevState</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p><code>getSnapshotBeforeUpdate</code> must pair with <code>componentDidUpdate()</code></p><h2 id=context-api>Context API</h2><p>Doc: <a href=https://reactjs.org/docs/context.html#reactcreatecontext target=_blank rel="noopener noreffer">https://reactjs.org/docs/context.html#reactcreatecontext</a></p><p>Use a context:</p><ol><li>React.createContext({defaultValue})</li><li>import the context your create. Warp you root component which you want to use this context in &lt;ContextName.provider >&lt;/ContextName.provider></li><li>component under root context component will access to this context<ol><li>static contextType = MyContext</li><li>Warp component like</li></ol></li></ol><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>MyContext</span><span class=p>.</span><span class=nx>Consumer</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{(</span><span class=nx>value</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=o>/</span><span class=nx>_</span> <span class=nx>render</span> <span class=nx>something</span> <span class=nx>based</span> <span class=nx>on</span> <span class=nx>the</span> <span class=nx>context</span> <span class=nx>value</span> <span class=nx>_</span><span class=o>/</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/MyContext.Consumer&gt;</span></span></span></code></pre></div></div><blockquote><p><strong>All consumers that are descendants of a Provider will re-render whenever the Provider’s value prop changes.</strong> The propagation from Provider to its descendant consumers (including .contextType and useContext) is not subject to the <code>shouldComponentUpdate</code> method, so the consumer is updated even when an ancestor component skips an update.</p></blockquote><p>Context API is not for solve all state sharing problem. Think like Context provider change(even prevent update by <code>shouldComponentUpdate</code>) all consumer will re-render.</p><blockquote><p>The defaultValue argument is <strong>only</strong> used when a component does not have a matching Provider above it in the tree. This can be helpful for testing components in isolation without wrapping them. Note: passing undefined as a Provider value does not cause consuming components to use defaultValue.</p></blockquote><h2 id=ref>Ref</h2><blockquote><p><code>React.createRef()</code> API introduced in React 16.3. If you are using an earlier release of React, we recommend using callback refs instead.</p></blockquote><p>There are a few good use cases for refs:</p><ul><li>Managing focus, text selection, or media playback.</li><li>Triggering imperative animations.</li><li>Integrating with third-party DOM libraries.</li></ul><h3 id=create-ref>create ref</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MyComponent</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>myRef</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>myRef</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=access-ref>access ref</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>node</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>myRef</span><span class=p>.</span><span class=nx>current</span><span class=p>;</span></span></span></code></pre></div></div><h3 id=adding-a-ref-to-a-class-component>Adding a Ref to a Class Component</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>CustomTextInput</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// create a ref to store the textInput DOM element
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>focusTextInput</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Explicitly focus the text input using the raw DOM API
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Note: we&#39;re accessing &#34;current&#34; to get the DOM node
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// tell React that we want to associate the &lt;input&gt; ref
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// with the `textInput` that we created in the constructor
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text&#34;</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>input</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>value</span><span class=o>=</span><span class=s2>&#34;Focus the text input&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>AutoFocusTextInput</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>componentDidMount</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>focusTextInput</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>CustomTextInput</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=adding-a-ref-to-a-functional-component>Adding a Ref to a Functional Component</h3><p>By default, <strong>you may not use the ref attribute on function components</strong> because they don’t have instances:</p><p>If you want to allow people to take a ref to your function component, you can use <code>forwardRef</code> (possibly in conjunction with <code>useImperativeHandle</code>), or you can convert the component to a class.</p><h4 id=useimperativehandle--forwardref>useImperativeHandle + ForwardRef</h4><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>FancyInput</span><span class=p>(</span><span class=nx>props</span><span class=p>,</span> <span class=nx>ref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>inputRef</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>useImperativeHandle</span><span class=p>(</span><span class=nx>ref</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>focus</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>inputRef</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}));</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>input</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>inputRef</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>FancyInput</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>forwardRef</span><span class=p>(</span><span class=nx>FancyInpacut</span><span class=p>);</span></span></span></code></pre></div></div><p>In this example, a parent component that renders <code>&lt;FancyInput ref={inputRef} /></code> would be able to call <code>inputRef.current.focus()</code>.</p><h2 id=react-hooks>React Hooks</h2><h3 id=usestate>useState</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-jsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span></span></span></code></pre></div></div><h3 id=useeffect>useEffect</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-jsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>effect</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>cleanup</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[&lt;</span><span class=nt>input</span><span class=p>&gt;]);</span></span></span></code></pre></div></div><h3 id=usecontext>useContext</h3><p>Given an Example for <strong>useContext + useReducer</strong></p><p>In <code>ContextProvider.jsx</code></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useReducer</span><span class=p>,</span> <span class=nx>useEffect</span><span class=p>,</span> <span class=nx>createContext</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>initialState</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>ID</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>store</span> <span class=o>=</span> <span class=nx>createContext</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>Provider</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>store</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>ContextProvider</span><span class=p>({</span> <span class=nx>children</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>dispatch</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useReducer</span><span class=p>((</span><span class=nx>state</span><span class=p>,</span> <span class=nx>action</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s1>&#39;setID&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=p>...</span><span class=nx>state</span><span class=p>,</span> <span class=nx>currentUserID</span><span class=o>:</span> <span class=nx>action</span><span class=p>.</span><span class=nx>payload</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=nx>initialState</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>Provider</span> <span class=nx>value</span><span class=o>=</span><span class=p>{{</span> <span class=nx>state</span><span class=p>,</span> <span class=nx>dispatch</span> <span class=p>}}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>children</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/Provider&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>ContextProvider</span><span class=p>;</span></span></span></code></pre></div></div><p>In <code>ContextConsumer.jsx</code>:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useContext</span><span class=p>,</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>store</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./ContextProvider.jsx&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ContextConsumer</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// get field that you pass in provider value
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>state</span><span class=p>,</span> <span class=nx>dispatch</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useContext</span><span class=p>(</span><span class=nx>store</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>dispatch</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;setID&#39;</span><span class=p>,</span> <span class=nx>payload</span><span class=o>:</span> <span class=s1>&#39;ID1&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span> <span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>ID</span><span class=p>}</span> <span class=o>&lt;</span><span class=err>/div&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>ContextConsumer</span><span class=p>;</span></span></span></code></pre></div></div><p><code>useContext(MyContext)</code> is equivalent to <code>static contextType = MyContext</code> in a <strong>class</strong>, or to <code>&lt;MyContext.Consumer></code></p><p><strong>But You still need a <code>&lt;MyContext.Provider></code> above in the tree to provide the value for this context.</strong></p><h3 id=usereducer>useReducer</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>initialState</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>reducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>action</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>switch</span> <span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;increment&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=nx>state</span><span class=p>.</span><span class=nx>count</span> <span class=o>+</span> <span class=nx>action</span><span class=p>.</span><span class=nx>payload</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;decrement&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=nx>state</span><span class=p>.</span><span class=nx>count</span> <span class=o>-</span> <span class=nx>action</span><span class=p>.</span><span class=nx>payload</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;clean&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Counter</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>dispatch</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useReducer</span><span class=p>(</span><span class=nx>reducer</span><span class=p>,</span> <span class=nx>initialState</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>dispatch</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;clean&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>Count</span><span class=o>:</span> <span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>count</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>dispatch</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;decrement&#39;</span><span class=p>,</span> <span class=nx>payload</span><span class=o>:</span> <span class=mi>1</span> <span class=p>})}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>-</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>dispatch</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;increment&#39;</span><span class=p>,</span> <span class=nx>payload</span><span class=o>:</span> <span class=mi>1</span> <span class=p>})}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><blockquote><p>Unlike Redux <code>dispatch</code> function doesn&rsquo;t need to add in <code>useEffect</code> or <code>useCallback</code> dependence list since <code>dispatch</code> always be a same function</p></blockquote><h4 id=setstate-by-usereducer>setState by useReducer</h4><p>Usually we set a state by useState. But if the state is simple boolean,<code>useReducer</code>is the shortest way to create a state for toggle a boolean value</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=k>switch</span><span class=p>,</span> <span class=nx>toggleSwitch</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useReducer</span><span class=p>((</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=o>!</span><span class=nx>state</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// switch is a boolean
</span></span></span><span class=line><span class=cl><span class=c1>// toggleSwitch is a function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>button</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{()=&gt;{</span><span class=nx>toggleSwitch</span><span class=p>()}}</span> <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=k>switch</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// or add one. if you want.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>[</span><span class=nx>num</span><span class=p>,</span> <span class=nx>addOne</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useReducer</span><span class=p>((</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>state</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span></span></span></code></pre></div></div><h4 id=relation-with-usestate>relation with useState,</h4><p><strong>Theoretically, <em>useReducer</em> is a more general <em>useState</em> hook.</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// this is exactly same with useState.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setSate</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useReducer</span><span class=p>((</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>state</span><span class=p>,</span> <span class=nx>initVal</span><span class=p>);</span></span></span></code></pre></div></div><p>That is why<code>dispatch</code>always be same. (setState always same in useState)</p><h3 id=useref>useRef</h3><blockquote><p><code>useRef()</code> creates a plain JavaScript object. The only <strong>difference</strong> between <code>useRef()</code> and creating a <code>{current: ...}</code> object yourself is that useRef will give you <strong>the same ref object</strong> on every render.</p></blockquote><h3 id=uselayouteffect>useLayoutEffect</h3><p>The only different between <code>useLayoutEffect</code> and <code>useEffect</code> is that the <code>useLayoutEffect</code> is synchronous. Just same as <code>componentDidMount</code> and <code>componentDidUpdate</code>.</p><ol><li>useLayoutEffect()</li><li>render</li><li>useEffect()</li></ol><h3 id=useimperativehandle>useImperativeHandle</h3><p><code>useImperativeHandle</code> customizes the instance value that is exposed to parent components when using ref. It is rare to use.</p><p>This is use for handle using ref to access functional component.</p><p><a href=https://tyrangyang.github.io/TyrangYang_blog/react/#adding-a-ref-to-a-functional-component rel>See Usage in Ref</a></p><h2 id=reactlazy>React.lazy()</h2><blockquote><p>The <code>React.lazy</code> function lets you render a dynamic import as a regular component.</p></blockquote><p>Component only be loaded when it will be rendered</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>Suspense</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// These lazy imports should put the end of other import code
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>OtherComponent</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./OtherComponent&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>AnotherComponent</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>lazy</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./AnotherComponent&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>MyComponent</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>Suspense</span> <span class=nx>fallback</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=nx>Loading</span><span class=p>...</span><span class=o>&lt;</span><span class=err>/div&gt;}&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>section</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>OtherComponent</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>AnotherComponent</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/section&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/Suspense&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>Tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>These lazy imports should put the end of other import code</div></div></div><blockquote><p>You can even wrap <strong>multiple</strong> lazy components with a <strong>single</strong> <code>Suspense</code> component.</p></blockquote><h2 id=class-component-vs-functional-component>Class Component vs Functional Component</h2><h3 id=class-component-lifecycle--functional-component-hooks>Class Component lifecycle ==> Functional Component hooks</h3><table><thead><tr><th style=text-align:center>Class component</th><th style=text-align:center>Functional component</th></tr></thead><tbody><tr><td style=text-align:center>state + setState</td><td style=text-align:center>useState()</td></tr><tr><td style=text-align:center>componentDidMount()</td><td style=text-align:center>useEffect() with a empty input list</td></tr><tr><td style=text-align:center>componentDidUpdate()</td><td style=text-align:center>useEffect() with a input list contained which you want to change</td></tr><tr><td style=text-align:center>componentWillUnmount()</td><td style=text-align:center>useEffect() with a return callback function</td></tr><tr><td style=text-align:center>shouldComponentUpdate()</td><td style=text-align:center>export default React.memo(<component name>)</td></tr></tbody></table><h2 id=logic-extraction>Logic extraction</h2><p>Suppose we have two components <code>A</code> and <code>B</code> that <code>B</code> is depends on <code>A</code>, the common solution is wrapping <code>B</code> in <code>A</code>. However,
when the logic in <code>A</code> need to reuse, we cannot copy and parse <code>A</code> to everywhere. Extracting the logic is essential.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>A</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// some logic will reuse
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c1>// ... other component
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=o>&lt;</span><span class=nx>B_depends_on_A</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// render &lt;A/&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>A</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>NOTE<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>There are THREE method in React to reuse component logic: <strong>High-Order Component</strong>, <strong>Render Props</strong>, <strong>Customize Hook</strong>(function component ONLY)</div></div></div><p>This Blog is an example to extract logic by Three different way: <a href=https://tyrangyang.github.io/TyrangYang_blog/react-logic-reuse/ rel>Check this Blog</a></p><h3 id=high-order-component>High-Order Component</h3><p>Concretely, <strong>a higher-order component is a function that takes a component and returns a new component.</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>withA</span> <span class=o>=</span> <span class=p>(</span><span class=nx>ComponentB</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// some logic will reuse
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=c1>// ... other component
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=o>&lt;</span><span class=nx>ComponentB</span> <span class=p>{...</span><span class=nx>props</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>BWithA</span> <span class=o>=</span> <span class=nx>withA</span><span class=p>(</span><span class=o>&lt;</span><span class=nx>B</span> <span class=o>/&gt;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>BWithA</span> <span class=nx>args</span><span class=o>=</span><span class=p>{...}</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=render-props>Render props</h3><p>Concretely, <strong>a render prop is a function prop that a component uses to know what to render.</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>A</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>render</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// some logic will reuse
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c1>// ... other component
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>{</span><span class=nx>render</span><span class=p>(</span><span class=nx>state</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>A</span> <span class=nx>render</span><span class=o>=</span><span class=p>{(</span><span class=nx>args</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=o>&lt;</span><span class=nx>B</span> <span class=nx>args</span><span class=o>=</span><span class=p>{</span><span class=nx>args</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=customize-hooks>Customize Hooks</h3><p>Concretely, <strong>A custom Hook is a JavaScript function whose name starts with ”use” and that may call other Hooks.</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>useA</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// some logic calculation
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>[</span><span class=nx>reuseLogicResult</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>reuseLogicRes</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useA</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>B</span> <span class=nx>args</span><span class=o>=</span><span class=p>{</span><span class=nx>reuseLogicRes</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h2 id=common-pitfall>Common Pitfall</h2><h3 id=performance-difference-snapshot-vs-current-value>Performance difference (SnapShot vs Current value)</h3><p>When React introduce hooks for functional component, closure problem will be brought in as well. This will cause different performance between class component and function component with same logic.</p><p>These two component have same logic:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useState</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ReactDOM</span> <span class=nx>from</span> <span class=s1>&#39;react-dom&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>ClassProfilePage</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>showMessage</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Followed &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleClick</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTimeout</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>showMessage</span><span class=p>,</span> <span class=mi>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleClick</span><span class=p>}</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>Get</span> <span class=nx>Current</span> <span class=nx>value</span> <span class=p>(</span><span class=kr>class</span> <span class=nx>component</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>FunctionProfilePage</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>showMessage</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;Followed &#39;</span> <span class=o>+</span> <span class=nx>props</span><span class=p>.</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>handleClick</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>showMessage</span><span class=p>,</span> <span class=mi>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClick</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>Get</span> <span class=nx>Snapshot</span> <span class=p>(</span><span class=nx>functional</span> <span class=nx>component</span><span class=p>)</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>App</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;App&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>button</span>
</span></span><span class=line><span class=cl>        <span class=nx>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>setState</span><span class=p>((</span><span class=nx>x</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}}</span>
</span></span><span class=line><span class=cl>      <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=kr>double</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=nx>state</span><span class=o>:</span><span class=p>{</span><span class=nx>state</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=cm>/* snapshot */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>FunctionProfilePage</span> <span class=nx>user</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=cm>/* current value */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>ClassProfilePage</span> <span class=nx>user</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><blockquote><p>Play with this example: <a href=../html/reactDifferentPerformance.html target=_blank>Link</a></p></blockquote><p>Click <code>Get</code> button first and then click <code>double</code>. Class component will alert current value, however function component will alert snapshot.</p><p>This is not a bug. This is a common question in Javascript due to the fact that every time you passing same reference or not.</p><blockquote><p>See another example: <a href=https://tyrangyang.github.io/TyrangYang_blog/js-trick/#snapshot--current-value rel>closure loop problem</a></p></blockquote><p>In React, Because <code>props</code> is immutable(assign a new obj when you want to change it) in functional component, each rendering has different <code>props</code>. Every click will generate a new props and <code>setTimeout()</code> display the value when you click. However, in Class component. After class generated, <code>props</code> is associated with class itself. Every rendering in class component have same <code>this.props</code> and <code>this.props.user</code> change overtime. Therefore, <code>setTimeout()</code> use same <code>this.props</code> and access <code>this.props.user</code> which is current value.</p><p>This flowing code simulate this problem</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>let</span> <span class=nx>props</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>10</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fnA</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>count</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>click</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>count</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>click</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>fnB</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>input</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>props</span> <span class=o>=</span> <span class=nx>input</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>click</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>count</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>fnA</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>res2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>fnB</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>res2</span><span class=p>.</span><span class=nx>click</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>props</span><span class=p>.</span><span class=nx>count</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>props</span><span class=p>.</span><span class=nx>count</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>props</span><span class=p>.</span><span class=nx>count</span><span class=o>--</span><span class=p>;</span></span></span></code></pre></div></div><h4 id=solution>Solution</h4><p>Since we know different props display snapshot and same reference display current value.</p><p>To get snapshot in class component, just assign the data that will alert to a new variable. (give several different value)</p><p>To get current value in functional component, add a ref(react) / create a value outside the component and store value to it. (give a same reference)</p><h3 id=initial-state-from-props>Initial state from props</h3><p>Ref: <a href=https://react.dev/learn/choosing-the-state-structure#don-t-mirror-props-in-state target=_blank rel="noopener noreffer">https://react.dev/learn/choosing-the-state-structure#don-t-mirror-props-in-state</a></p><blockquote><p>It is <strong>NOT RECOMMEND</strong> that initialized state from props directly. Update <em>props</em> won&rsquo;t be reflected in the <em>state</em>. <strong>Because initialize state only run once</strong></p></blockquote><blockquote><p><strong>Only use this pattern if you intentionally want to ignore prop updates.</strong></p></blockquote><p>Class Base:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Don&#39;t do this!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>color</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>color</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>Functional Base:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//  Don&#39;t do this!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>Message</span><span class=p>({</span> <span class=nx>messageColor</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>messageColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><div class="details admonition success open"><div class="details-summary admonition-title"><i class="icon fas fa-check-circle fa-fw" aria-hidden=true></i>The correct way is just use props:<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Message</span><span class=p>({</span> <span class=nx>messageColor</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>color</span> <span class=o>=</span> <span class=nx>messageColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>If really want to convert props to status. It should use be:</p><p>Class Base:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>componentDidMount</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>color</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>color</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>Functional Base:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>color</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>setState</span><span class=p>(</span><span class=nx>color</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=nx>color</span><span class=p>]);</span></span></span></code></pre></div></div><h2 id=trick>Trick</h2><h3 id=inject-props-to-children>inject props to children</h3><p>For example, we have a Wrapper component:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-jsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Wrapper</span><span class=p>&gt;{</span><span class=nx>children</span><span class=p>}&lt;/</span><span class=nt>Wrapper</span><span class=p>&gt;</span></span></span></code></pre></div></div><p>if we want to inject a props to children. Could use <code>cloneElement()</code> to achieve.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-jsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>isOpen</span><span class=p>,</span> <span class=nx>setIsOpen</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=p>&lt;</span><span class=nt>Wrapper</span><span class=p>&gt;{</span><span class=nx>cloneElement</span><span class=p>(</span><span class=nx>children</span><span class=p>,</span> <span class=p>{</span> <span class=nx>isOpen</span><span class=o>:</span> <span class=nx>isOpen</span> <span class=p>})}&lt;/</span><span class=nt>Wrapper</span><span class=p>&gt;;</span></span></span></code></pre></div></div><p>Reference from <a href=https://react.dev/reference/react/cloneElement target=_blank rel="noopener noreffer">React.dev</a></p><h2 id=react-posts-archive>React Posts Archive</h2><h2 id=structure>Structure</h2><h3 id=packagejson>package.json</h3><p>react & react-dom is necessary for web app. For mobile app need react-native instead of react-dom.</p><h3 id=publicindexhtml>public/index.html</h3><p>signal page application which is index.html</p><p>Everything your do will inside <code>&lt;div id="root">&lt;/div></code></p><h3 id=srcindexjs>src/index.js</h3><p>Entry point for react</p><h3 id=srcappjs>src/App.js</h3><p>All the component.</p><p>Inside the class, the render() method is called life cycle method and to render the page.</p><p>In JSX, you cannot use HTML class attribute. you have to use className.</p><h2 id=163--before-163>16.3 && before 16.3</h2><p><a href=https://www.jianshu.com/p/ce5451287f1c target=_blank rel="noopener noreffer">link</a></p><h2 id=debugging-hook>Debugging hook</h2><h3 id=useprevious>usePrevious</h3><p>Save previous state</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>usePrevious</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span><span class=p>(</span><span class=nx>value</span><span class=o>:</span> <span class=nx>T</span><span class=p>,</span> <span class=nx>initialValue</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>ref</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>(</span><span class=nx>initialValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ref</span><span class=p>.</span><span class=nx>current</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>ref</span><span class=p>.</span><span class=nx>current</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=useeffectdebugger>useEffectDebugger</h3><p>Get which field trigger useEffect from dependency list</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useEffectDebugger</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>effectHook</span><span class=o>:</span> <span class=nx>EffectCallback</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencies</span><span class=o>:</span> <span class=nx>DependencyList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencyNames</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>previousDeps</span> <span class=o>=</span> <span class=nx>usePrevious</span><span class=p>(</span><span class=nx>dependencies</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>changedDeps</span> <span class=o>=</span> <span class=nx>dependencies</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>prev</span><span class=p>,</span> <span class=nx>dependency</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>dependency</span> <span class=o>!==</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>keyName</span> <span class=o>=</span> <span class=nx>dependencyNames</span><span class=p>[</span><span class=nx>index</span><span class=p>]</span> <span class=o>||</span> <span class=nx>index</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span><span class=nx>prev</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nx>keyName</span><span class=p>]</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>before</span><span class=o>:</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>],</span>
</span></span><span class=line><span class=cl>          <span class=nx>after</span><span class=o>:</span> <span class=nx>dependency</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>prev</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>changedDeps</span><span class=p>).</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;[use-effect-debugger] &#39;</span><span class=p>,</span> <span class=nx>changedDeps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(</span><span class=nx>effectHook</span><span class=p>,</span> <span class=p>[...</span><span class=nx>dependencies</span><span class=p>,</span> <span class=nx>effectHook</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=usecallbackdebugger>useCallbackDebugger</h3><p>Get which field trigger useCallback from dependency list</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCallbackDebugger</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=p>(...</span><span class=nx>args</span><span class=o>:</span> <span class=nx>any</span><span class=p>[])</span> <span class=p>=&gt;</span> <span class=nx>any</span><span class=o>&gt;</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>callback</span><span class=o>:</span> <span class=nx>T</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencies</span><span class=o>:</span> <span class=nx>DependencyList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencyNames</span><span class=o>:</span> <span class=nx>string</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nx>debuggerName</span> <span class=o>=</span> <span class=s1>&#39;use-callBack-debugger&#39;</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>previousDeps</span> <span class=o>=</span> <span class=nx>usePrevious</span><span class=p>(</span><span class=nx>dependencies</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>changedDeps</span> <span class=o>=</span> <span class=nx>dependencies</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>prev</span><span class=p>,</span> <span class=nx>dependency</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>dependency</span> <span class=o>!==</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>keyName</span> <span class=o>=</span> <span class=nx>dependencyNames</span><span class=p>[</span><span class=nx>index</span><span class=p>]</span> <span class=o>||</span> <span class=nx>index</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span><span class=nx>prev</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nx>keyName</span><span class=p>]</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>before</span><span class=o>:</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>],</span>
</span></span><span class=line><span class=cl>          <span class=nx>after</span><span class=o>:</span> <span class=nx>dependency</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>prev</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>changedDeps</span><span class=p>).</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=nx>debuggerName</span><span class=si>}</span><span class=sb>] `</span><span class=p>,</span> <span class=nx>changedDeps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>useCallback</span><span class=p>(</span><span class=nx>callback</span><span class=p>,</span> <span class=p>[...</span><span class=nx>dependencies</span><span class=p>,</span> <span class=nx>callback</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=usememodebugger>useMemoDebugger</h3><p>Get which field trigger useMemo from dependency list</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useMemoDebugger</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=p>(...</span><span class=nx>args</span><span class=o>:</span> <span class=nx>any</span><span class=p>[])</span> <span class=p>=&gt;</span> <span class=nx>any</span><span class=o>&gt;</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>callback</span><span class=o>:</span> <span class=nx>T</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencies</span><span class=o>:</span> <span class=nx>DependencyList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>dependencyNames</span><span class=o>:</span> <span class=nx>string</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nx>debuggerName</span> <span class=o>=</span> <span class=s1>&#39;use-memo-debugger&#39;</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>previousDeps</span> <span class=o>=</span> <span class=nx>usePrevious</span><span class=p>(</span><span class=nx>dependencies</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>changedDeps</span> <span class=o>=</span> <span class=nx>dependencies</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>prev</span><span class=p>,</span> <span class=nx>dependency</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>dependency</span> <span class=o>!==</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>keyName</span> <span class=o>=</span> <span class=nx>dependencyNames</span><span class=p>[</span><span class=nx>index</span><span class=p>]</span> <span class=o>||</span> <span class=nx>index</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span><span class=nx>prev</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nx>keyName</span><span class=p>]</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>before</span><span class=o>:</span> <span class=nx>previousDeps</span><span class=p>[</span><span class=nx>index</span><span class=p>],</span>
</span></span><span class=line><span class=cl>          <span class=nx>after</span><span class=o>:</span> <span class=nx>dependency</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>prev</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>changedDeps</span><span class=p>).</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=nx>debuggerName</span><span class=si>}</span><span class=sb>] `</span><span class=p>,</span> <span class=nx>changedDeps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>useMemo</span><span class=p>(</span><span class=nx>callback</span><span class=p>,</span> <span class=p>[...</span><span class=nx>dependencies</span><span class=p>,</span> <span class=nx>callback</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=usetraceupdate>useTraceUpdate</h3><p>Get which props been pass to function component trigger rerender</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>useTraceUpdate</span><span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=nx>Record</span><span class=o>&lt;</span><span class=nx>string</span><span class=p>,</span> <span class=nx>any</span><span class=o>&gt;&gt;</span><span class=p>(</span><span class=nx>props</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>prev</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>changedProps</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>props</span><span class=p>).</span><span class=nx>reduce</span><span class=o>&lt;</span><span class=nx>Record</span><span class=o>&lt;</span><span class=nx>string</span><span class=p>,</span> <span class=nx>any</span><span class=o>&gt;&gt;</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nx>ps</span><span class=p>,</span> <span class=p>[</span><span class=nx>k</span><span class=p>,</span> <span class=nx>v</span><span class=p>])</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>prev</span><span class=p>.</span><span class=nx>current</span><span class=p>[</span><span class=nx>k</span><span class=p>]</span> <span class=o>!==</span> <span class=nx>v</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>ps</span><span class=p>[</span><span class=nx>k</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=nx>prev</span><span class=p>.</span><span class=nx>current</span><span class=p>[</span><span class=nx>k</span><span class=p>],</span> <span class=nx>v</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>ps</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>changedProps</span><span class=p>).</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Changed props:&#39;</span><span class=p>,</span> <span class=nx>changedProps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>prev</span><span class=p>.</span><span class=nx>current</span> <span class=o>=</span> <span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2019-10-03</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=https://tyrangyang.github.io/TyrangYang_blog/react/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on X" data-sharer=x data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview" data-via=@TyrangYang data-hashtags=web,react,trick><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Threads" data-sharer=threads data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview"><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-hashtag=web><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@14.9.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Diaspora" data-sharer=diaspora data-url=https://tyrangyang.github.io/TyrangYang_blog/react/ data-title="React overview" data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2ftyrangyang.github.io%2fTyrangYang_blog%2freact%2f&amp;text=React%20overview" target=_blank title="Share on Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/web/>Web</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/react/>React</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/trick/>Trick</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=https://tyrangyang.github.io/TyrangYang_blog/>Home</a></span></section></div><div class=post-nav><a href=https://tyrangyang.github.io/TyrangYang_blog/concurrent-programming-4/ class=prev rel=prev title="Concurrent Programming Course note 4"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Concurrent Programming Course note 4</a>
<a href=https://tyrangyang.github.io/TyrangYang_blog/cool-website-archive/ class=next rel=next title="Some cool websites archive">Some cool websites archive<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.130.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/ target=_blank>xxxx</a></span>&nbsp;|&nbsp;<span class=license><a rel=license style=position:relative;top:3px href=http://creativecommons.org/licenses/by-nc-nd/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png></a><br>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-nd/4.0/>Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@5.20.2/dist/lite/builds/browser.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script>window.config={comment:{},search:{algoliaAppID:"QXEV52XWDS",algoliaIndex:"blog",algoliaSearchKey:"db56d05ebbeed337adca1ef261004dcc",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script src=https://tyrangyang.github.io/TyrangYang_blog/TyrangYang_blog/js/theme.min.js></script></body></html>