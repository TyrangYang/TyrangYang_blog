<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.145.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>TyrangYang_Blog</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://tyrangyang.github.io/TyrangYang_blog/">
<meta property="og:site_name" content="TyrangYang_Blog"><meta property="og:title" content="TyrangYang_Blog"><meta property="og:description" content="This is my cool site"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="TyrangYang_Blog"><meta name=twitter:description content="This is my cool site"><meta name=twitter:site content="@TyrangYang"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=https://tyrangyang.github.io/TyrangYang_blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://tyrangyang.github.io/TyrangYang_blog/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://tyrangyang.github.io/TyrangYang_blog/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=https://tyrangyang.github.io/TyrangYang_blog/apple-touch-icon.png><link rel=mask-icon href=https://tyrangyang.github.io/TyrangYang_blog/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=https://tyrangyang.github.io/TyrangYang_blog/site.webmanifest><link rel=canonical href=https://tyrangyang.github.io/TyrangYang_blog/><link rel=alternate href=https://tyrangyang.github.io/TyrangYang_blog/index.xml type=application/rss+xml title=TyrangYang_Blog><link rel=feed href=https://tyrangyang.github.io/TyrangYang_blog/index.xml type=application/rss+xml title=TyrangYang_Blog><link rel=stylesheet href=https://tyrangyang.github.io/TyrangYang_blog/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/tyrangyang.github.io\/TyrangYang_blog\/","inLanguage":"en","author":{"@type":"Person","name":"xxxx"},"description":"This is my cool site","name":"TyrangYang_Blog"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=TyrangYang_Blog>TyrangYang_Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/posts/><i class='fas fa-book-open'></i> Posts </a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/tags/><i class='fas fa-tags'></i> Tags </a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/categories/><i class='fab fa-buffer'></i> Categories </a><a class=menu-item href=https://github.com/TyrangYang/TyrangYang_blog title="Blog github" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw fa-fw'></i> </a><a class=menu-item href=https://tyrangyang.github.io/ title="home page" rel="noopener noreffer" target=_blank><i class="fas fa-home"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=TyrangYang_Blog>TyrangYang_Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/posts/ title><i class='fas fa-book-open'></i> Posts</a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/tags/ title><i class='fas fa-tags'></i> Tags</a><a class=menu-item href=https://tyrangyang.github.io/TyrangYang_blog/categories/ title><i class='fab fa-buffer'></i> Categories</a><a class=menu-item href=https://github.com/TyrangYang/TyrangYang_blog title="Blog github" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw fa-fw'></i> </a><a class=menu-item href=https://tyrangyang.github.io/ title="home page" rel="noopener noreffer" target=_blank><i class="fas fa-home"></i> </a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-avatar><a href=https://tyrangyang.github.io/TyrangYang_blog/posts/ title=" Posts"><img class=lazyload src=https://tyrangyang.github.io/TyrangYang_blog/svg/loading.min.svg data-src=https://tyrangyang.github.io/TyrangYang_blog/images/art2.png data-srcset="https://tyrangyang.github.io/TyrangYang_blog/images/art2.png, https://tyrangyang.github.io/TyrangYang_blog/images/art2.png 1.5x, https://tyrangyang.github.io/TyrangYang_blog/images/art2.png 2x" data-sizes=auto alt=/images/art2.png title=/images/art2.png></a></div><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links><a href=https://github.com/TyrangYang title=GitHub target=_blank rel="noopener noreffer me"><i class="fab fa-github fa-fw" aria-hidden=true></i></a><a href=https://linkedin.com/in/haolin-yang-2b3a061a3 title=LinkedIn target=_blank rel="noopener noreffer me"><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=https://x.com/@TyrangYang title=X target=_blank rel="noopener noreffer me"><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=mailto:haolinyang95@gamil.com title=Email rel=me><i class="far fa-envelope fa-fw" aria-hidden=true></i></a></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/js-asynchronous/>Asynchronous in JS</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Haolin Yang</a></span>&nbsp;<span class=post-publish>published on <time datetime=2025-07-20>2025-07-20</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/posts/><i class="far fa-folder fa-fw" aria-hidden=true></i>Posts</a></span></div><div class=content><h2 id=synchronous--asynchronous>Synchronous & asynchronous</h2><p>Function run synchronously means code is running as same as your writing.</p><p>But in real situation, some code may need time to running (like fetch). If synchronously run all code, program will be block and wait this time consuming part finish and continue.</p><p>In the most of the time, You code logic need wait to continue but you don&rsquo;t want to block all progress. Maybe UI rendering or some other total unrelated code. Unfortunately, JS is single thread langrage and concurrency is not exist. Therefore, you need some technique to some part running asynchronously,</p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/js-asynchronous/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/nodejs/>Nodejs</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/promise/>Promise</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/generator/>Generator</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/thunk/>Thunk</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/html-trick/>HTML/Document Trick</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2024-02-26>2024-02-26</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/note/><i class="far fa-folder fa-fw" aria-hidden=true></i>Note</a>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/categories/trick/><i class="far fa-folder fa-fw" aria-hidden=true></i>Trick</a></span></div><div class=content><h2 id=understanding-offsetwidth-clientwidth-scrollwidth>Understanding offsetWidth, clientWidth, scrollWidth</h2><p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>All these property will round the value to an integer. If you need a fractional value, use <a href=#element-getboundingclientrect rel>element.getBoundingClientRect()</a>.</div></div></div><figure><img src=https://tyrangyang.github.io/TyrangYang_blog/images/html-trick/screen-width.png></figure></p><h2 id=get-scrollbar-width>Get Scrollbar width</h2><p>Reference: <a href=https://www.30secondsofcode.org/js/s/get-scrollbar-width/ target=_blank rel="noopener noreffer">https://www.30secondsofcode.org/js/s/get-scrollbar-width/</a></p><h3 id=get-window-scroll-bar-width>Get window scroll bar width</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getScrollbarWidth</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>innerWidth</span> <span class=o>-</span> <span class=nb>document</span><span class=p>.</span><span class=nx>documentElement</span><span class=p>.</span><span class=nx>clientWidth</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>getScrollbarWidth</span><span class=p>();</span></span></span></code></pre></div></div><h3 id=get-a-element-scroll-bar-width>Get a element scroll bar width</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getScrollbarWidth</span> <span class=o>=</span> <span class=p>(</span><span class=nx>el</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>leftBorder</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>getComputedStyle</span><span class=p>(</span><span class=nx>el</span><span class=p>).</span><span class=nx>getPropertyValue</span><span class=p>(</span><span class=s1>&#39;border-left-width&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>rightBorder</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>getComputedStyle</span><span class=p>(</span><span class=nx>el</span><span class=p>).</span><span class=nx>getPropertyValue</span><span class=p>(</span><span class=s1>&#39;border-right-width&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>el</span><span class=p>.</span><span class=nx>offsetWidth</span> <span class=o>-</span> <span class=nx>el</span><span class=p>.</span><span class=nx>clientWidth</span> <span class=o>-</span> <span class=nx>leftBorder</span> <span class=o>-</span> <span class=nx>rightBorder</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>getScrollbarWidth</span><span class=p>(</span><span class=nx>el</span><span class=p>);</span></span></span></code></pre></div></div><h2 id=element-getboundingclientrect>Element: getBoundingClientRect()</h2><p><code>el.getBoundingClientRect()</code> will return: <code>left</code>, <code>top</code>, <code>right</code>, <code>bottom</code>, <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code>.</p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/html-trick/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/trick/>Trick</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/typescript-trick/>Typescript Trick</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2024-02-26>2024-02-26</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/note/><i class="far fa-folder fa-fw" aria-hidden=true></i>Note</a>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/categories/trick/><i class="far fa-folder fa-fw" aria-hidden=true></i>Trick</a></span></div><div class=content><h2 id=generic-types-optional>generic types optional</h2><p><strong>To make a generic type optional, you have to assign the void as the default value.</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fetchData</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>T</span> <span class=err>=</span> <span class=na>void</span><span class=p>&gt;(</span><span class=nx>url</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span>: <span class=kt>T</span> <span class=o>=</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><p><a href=https://garbagevalue.com/blog/optional-generic-typescript#quick-solutions-make-generic-type-optional target=_blank rel="noopener noreffer">https://garbagevalue.com/blog/optional-generic-typescript#quick-solutions-make-generic-type-optional</a></p><h2 id=string----string-string-->string[ ] & [ string, &mldr;string[ ] ]</h2><p>The main difference is that type <code>[string, ...string[]]</code> at least have one element. <code>[]</code> will alert error. <code>string[]</code> could be empty. <code>[]</code> is ok.</p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/typescript-trick/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/typescript/>Typescript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/trick/>Trick</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/ffmpeg/>ffmpeg</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2023-03-12>2023-03-12</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=content><h2 id=reference>Reference</h2><figure><img src=https://tyrangyang.github.io/TyrangYang_blog/images/ffmpeg/ffmpeg.png></figure><h3 id=official>official</h3><p><a href=https://ffmpeg.org target=_blank rel="noopener noreffer">https://ffmpeg.org</a></p><h3 id=blog>blog</h3><p><a href=https://fireship.io/lessons/ffmpeg-useful-techniques/ target=_blank rel="noopener noreffer">https://fireship.io/lessons/ffmpeg-useful-techniques/</a></p><h3 id=node-js>node js</h3><p><a href=https://www.npmjs.com/package/fluent-ffmpeg target=_blank rel="noopener noreffer">https://www.npmjs.com/package/fluent-ffmpeg</a></p><h2 id=example>example</h2><h3 id=concatenate>concatenate</h3><blockquote><p>ffmpeg -f concat -i vids.txt -c copy out.mp4</p></blockquote><p>vids.txt:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-t"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-t data-lang=t><span class=line><span class=cl><span class=n>file</span> <span class=s>&#39;name1.mov&#39;</span>
</span></span><span class=line><span class=cl><span class=n>file</span> <span class=s>&#39;name2.mov&#39;</span>
</span></span><span class=line><span class=cl><span class=n>file</span> <span class=s>&#39;name3.mov&#39;</span></span></span></code></pre></div></div><h3 id=type-convention>Type convention</h3><blockquote><p>ffmpeg -i in.mp4 out.mov</p></blockquote><blockquote><p>ffmpeg -i in.mp4 out.gif</p></blockquote><h3 id=scale>Scale</h3><p>It very common to reduce size of output file. Change scale usually the common and efficient way to do so.</p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/ffmpeg/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/overview/>Overview</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/video/>Video</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/ffmpeg/>Ffmpeg</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/design-pattern/>Design Pattern</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2021-07-22>2021-07-22</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=content><h2></h2><h2 id=design-pattern>Design pattern</h2><h3 id=factory-pattern>Factory pattern</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>createDataBaseClass</span> <span class=o>=</span> <span class=p>(</span><span class=nx>dbName</span><span class=o>:</span> <span class=nx>DBOption</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=nx>dbName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;InMemo&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>InMemoryDataBase</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;SQL&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>SQL_DB</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// you can add anything else
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h3 id=singleton-pattern>Singleton pattern</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>createDataBase</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=nx>BaseRecord</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>db</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InMemoryDataBase</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>db</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pokemonDB</span> <span class=o>=</span> <span class=nx>createDataBase</span><span class=o>&lt;</span><span class=nx>Pokemon</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>set</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;Bulbasaur&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>attack</span><span class=o>:</span> <span class=mi>59</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>defense</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Bulbasaur&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// A CPP way to do
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>createDataBase2</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=nx>BaseRecord</span><span class=o>&gt;</span><span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>class</span> <span class=nx>InMemoryDataBase2</span> <span class=kr>implements</span> <span class=nx>DataBase</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>private</span> <span class=nx>db</span><span class=o>:</span> <span class=nx>Record</span><span class=o>&lt;</span><span class=nx>string</span><span class=p>,</span> <span class=nx>T</span><span class=o>&gt;</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>        <span class=kr>static</span> <span class=nx>instance</span><span class=o>:</span> <span class=nx>InMemoryDataBase2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InMemoryDataBase2</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>private</span> <span class=nx>constructor</span><span class=p>()</span> <span class=p>{}</span> <span class=c1>// private constructor is necessary
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=kr>public</span> <span class=nx>set</span><span class=p>(</span><span class=nx>newValue</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>[</span><span class=nx>newValue</span><span class=p>.</span><span class=nx>id</span><span class=p>]</span> <span class=o>=</span> <span class=nx>newValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>public</span> <span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span> <span class=o>|</span> <span class=kc>undefined</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>[</span><span class=nx>id</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>InMemoryDataBase2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PokemonDB2</span> <span class=o>=</span> <span class=nx>createDataBase2</span><span class=o>&lt;</span><span class=nx>Pokemon</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>PokemonDB2</span><span class=p>.</span><span class=nx>instance</span><span class=p>.</span><span class=nx>set</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;Bulbasaur&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>attack</span><span class=o>:</span> <span class=mi>59</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>defense</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div></div><h3 id=observer-pubsub-pattern>Observer (pub/sub) pattern</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-js"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// ++++++++++  Observer  ++++++++++
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>createObserver</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>EventType</span><span class=o>&gt;</span><span class=p>()</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>subscribe</span><span class=o>:</span> <span class=p>(</span><span class=nx>listener</span><span class=o>:</span> <span class=nx>listenerType</span><span class=o>&lt;</span><span class=nx>EventType</span><span class=o>&gt;</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>;</span> <span class=c1>// take listener and return an unsubscribe function
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>publish</span><span class=o>:</span> <span class=p>(</span><span class=nx>event</span><span class=o>:</span> <span class=nx>EventType</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>listeners</span><span class=o>:</span> <span class=nx>listenerType</span><span class=o>&lt;</span><span class=nx>EventType</span><span class=o>&gt;</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>subscribe</span><span class=o>:</span> <span class=p>(</span><span class=nx>listener</span><span class=o>:</span> <span class=nx>listenerType</span><span class=o>&lt;</span><span class=nx>EventType</span><span class=o>&gt;</span><span class=p>)</span><span class=o>:</span> <span class=p>(()</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>listeners</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>listeners</span> <span class=o>=</span> <span class=nx>listeners</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>l</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>l</span> <span class=o>!==</span> <span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>publish</span><span class=o>:</span> <span class=p>(</span><span class=nx>event</span><span class=o>:</span> <span class=nx>EventType</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>listeners</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>l</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>l</span><span class=p>(</span><span class=nx>event</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//  +++++++++++++++++++++++++++++
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>BeforeAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>newValue</span><span class=o>:</span> <span class=nx>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=nx>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>AfterAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=nx>T</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>InMemoryDBWithObserver</span><span class=o>&lt;</span><span class=nx>T</span> <span class=kr>extends</span> <span class=nx>BaseRecord</span><span class=o>&gt;</span> <span class=kr>extends</span> <span class=nx>InMemoryDataBase</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>public</span> <span class=nx>set</span><span class=p>(</span><span class=nx>newValue</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>BeforeAddValueObserver</span><span class=p>.</span><span class=nx>publish</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>newValue</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>value</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>[</span><span class=nx>newValue</span><span class=p>.</span><span class=nx>id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>[</span><span class=nx>newValue</span><span class=p>.</span><span class=nx>id</span><span class=p>]</span> <span class=o>=</span> <span class=nx>newValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>AfterAddValueObserver</span><span class=p>.</span><span class=nx>publish</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>value</span><span class=o>:</span> <span class=nx>newValue</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>public</span> <span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span> <span class=o>|</span> <span class=kc>undefined</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>[</span><span class=nx>id</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// observer
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>private</span> <span class=nx>BeforeAddValueObserver</span> <span class=o>=</span> <span class=nx>createObserver</span><span class=o>&lt;</span><span class=nx>BeforeAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>private</span> <span class=nx>AfterAddValueObserver</span> <span class=o>=</span> <span class=nx>createObserver</span><span class=o>&lt;</span><span class=nx>AfterAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>onBeforeAddValue</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>listener</span><span class=o>:</span> <span class=nx>listenerType</span><span class=o>&lt;</span><span class=nx>BeforeAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>BeforeAddValueObserver</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>onAfterAddValue</span><span class=p>(</span><span class=nx>listener</span><span class=o>:</span> <span class=nx>listenerType</span><span class=o>&lt;</span><span class=nx>AfterAddValueEvent</span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;&gt;</span><span class=p>)</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>AfterAddValueObserver</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// visiter pattern
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>visit</span><span class=p>(</span><span class=nx>visitor</span><span class=o>:</span> <span class=p>(</span><span class=nx>item</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>void</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>Object</span><span class=p>.</span><span class=nx>values</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>visitor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// strategy pattern
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>getBest</span><span class=p>(</span><span class=nx>strategy</span><span class=o>:</span> <span class=p>(</span><span class=nx>item</span><span class=o>:</span> <span class=nx>T</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>number</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>findRes</span><span class=o>:</span> <span class=p>{</span> <span class=nx>max</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span> <span class=nx>res</span><span class=o>:</span> <span class=nx>T</span> <span class=o>|</span> <span class=kc>null</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>max</span><span class=o>:</span> <span class=o>-</span><span class=kc>Infinity</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>values</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>db</span><span class=p>).</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>prev</span><span class=p>,</span> <span class=nx>cur</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nx>score</span> <span class=o>=</span> <span class=nx>strategy</span><span class=p>(</span><span class=nx>cur</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>prev</span><span class=p>.</span><span class=nx>max</span> <span class=o>&lt;</span> <span class=nx>score</span><span class=p>)</span> <span class=k>return</span> <span class=p>{</span> <span class=nx>max</span><span class=o>:</span> <span class=nx>score</span><span class=p>,</span> <span class=nx>res</span><span class=o>:</span> <span class=nx>cur</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>prev</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=nx>findRes</span><span class=p>).</span><span class=nx>res</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pokemonDB</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InMemoryDBWithObserver</span><span class=o>&lt;</span><span class=nx>Pokemon</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>onBeforeAddValue</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Before add value&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>unsubscribe</span> <span class=o>=</span> <span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>onAfterAddValue</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;After ADD A Value&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>onAfterAddValue</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;-----------&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>set</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;Bulbasaur&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>attack</span><span class=o>:</span> <span class=mi>59</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>defense</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>set</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;Bulbasaur&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>attack</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>defense</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>unsubscribe</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>set</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;Spinpsaur&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>attack</span><span class=o>:</span> <span class=mi>159</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>defense</span><span class=o>:</span> <span class=mi>110</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Visit pattern:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>visit</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>item</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;strategy pattern:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>pokemonDB</span><span class=p>.</span><span class=nx>getBest</span><span class=p>((</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>item</span><span class=p>.</span><span class=nx>defense</span><span class=p>));</span></span></span></code></pre></div></div><h3 id=adaptor-pattern>Adaptor pattern</h3></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/design-pattern/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/typescript/>Typescript</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/typescript/>Typescript overview</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2021-04-08>2021-04-08</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=content><h2 id=type>type</h2><h3 id=union-type--literal-type>Union type & Literal type</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>add</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span>: <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span>: <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=kr>type</span><span class=o>?:</span> <span class=s1>&#39;number&#39;</span> <span class=o>|</span> <span class=s1>&#39;string&#39;</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=kr>type</span> <span class=o>===</span> <span class=s1>&#39;string&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>a</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span> <span class=o>+</span> <span class=nx>b</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=k>return</span> <span class=o>+</span><span class=nx>a</span> <span class=o>+</span> <span class=o>+</span><span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>));</span></span></span></code></pre></div></div><h3 id=array>Array</h3><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Book</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>books</span>: <span class=kt>Book</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[];</span></span></span></code></pre></div></div><h3 id=unknown>unknown</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>test1</span>: <span class=kt>unknown</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>test2</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>test1</span> <span class=o>=</span> <span class=s1>&#39;xyz&#39;</span><span class=p>;</span> <span class=c1>// ok
</span></span></span><span class=line><span class=cl><span class=c1>// test2 = test1; // error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>f1</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span><span class=p>.</span><span class=nx>b</span><span class=p>();</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>f2</span><span class=p>(</span><span class=nx>a</span>: <span class=kt>unknown</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span><span class=p>.</span><span class=nx>b</span><span class=p>();</span> <span class=c1>//error
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Object is of type &#39;unknown&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div></div><h2 id=type-a-function>Type a Function</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>listenerType</span><span class=p>&lt;</span><span class=nt>EventType</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span>: <span class=kt>EventType</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span></span></span></code></pre></div></div><h2 id=assign-a-plain-object>Assign a plain Object</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Primitive</span> <span class=o>=</span> <span class=kt>bigint</span> <span class=o>|</span> <span class=kr>boolean</span> <span class=o>|</span> <span class=kc>null</span> <span class=o>|</span> <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>PlainObject</span> <span class=o>=</span> <span class=nx>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=p>,</span> <span class=na>Primitive</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj1</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>a</span>: <span class=kt>1</span> <span class=p>};</span> <span class=c1>//✅
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>obj2</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>a</span>: <span class=kt>1</span> <span class=p>};</span> <span class=c1>//❌
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>obj3</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>myClass</span><span class=p>();</span> <span class=c1>//❌
</span></span></span></code></pre></div></div><h2 id=assign-a-nested-plain-object>Assign a nested plain Object</h2><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Primitive</span> <span class=o>=</span> <span class=kt>bigint</span> <span class=o>|</span> <span class=kr>boolean</span> <span class=o>|</span> <span class=kc>null</span> <span class=o>|</span> <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span> <span class=o>|</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>JSONValue</span> <span class=o>=</span> <span class=nx>Primitive</span> <span class=o>|</span> <span class=nx>JSONObject</span> <span class=o>|</span> <span class=nx>JSONArray</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>JSONObject</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nx>key</span>: <span class=kt>string</span><span class=p>]</span><span class=o>:</span> <span class=nx>JSONValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>JSONArray</span> <span class=kr>extends</span> <span class=nb>Array</span><span class=p>&lt;</span><span class=nt>JSONValue</span><span class=p>&gt;</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj1</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>a</span>: <span class=kt>1</span> <span class=p>};</span> <span class=c1>//✅
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>obj2</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>a</span><span class=o>:</span> <span class=p>{</span> <span class=nx>b</span><span class=o>:</span> <span class=p>{</span> <span class=nx>c</span>: <span class=kt>3</span> <span class=p>}</span> <span class=p>}</span> <span class=p>};</span> <span class=c1>//✅
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>obj3</span>: <span class=kt>PlainObject</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>myClass</span><span class=p>();</span> <span class=c1>//❌
</span></span></span></code></pre></div></div><h2 id=type-template-arrow-function-example>Type Template arrow function example</h2><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useFetchAPI</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>T</span> <span class=na>extends</span> <span class=na>unknown</span><span class=p>&gt;(</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span>: <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span> <span class=o>|</span> <span class=s1>&#39;GET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>body?</span>: <span class=kt>string</span> <span class=o>|</span> <span class=nx>JSONObject</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=p>[</span><span class=kt>string</span><span class=p>,</span> <span class=nx>T</span> <span class=o>|</span> <span class=kc>null</span><span class=p>]</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>fetchStatus</span><span class=p>,</span> <span class=nx>setFetchStatus</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>fetchResult</span><span class=p>,</span> <span class=nx>setFetchResult</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>&lt;</span><span class=nt>T</span> <span class=err>|</span> <span class=na>null</span><span class=p>&gt;(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>apiMockFetch</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=o>&lt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>requestId</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>result</span>: <span class=kt>T</span> <span class=o>|</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span><span class=o>&gt;</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=nx>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>setTimeout</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>resolve</span><span class=p>(</span><span class=nx>someData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>fetchData</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=p>{</span> <span class=nx>status</span><span class=p>,</span> <span class=nx>result</span> <span class=p>}</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>apiMockFetch</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>setFetchStatus</span><span class=p>(</span><span class=nx>status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>result</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>setFetchResult</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>fetchStatus</span> <span class=o>!==</span> <span class=s1>&#39;success&#39;</span><span class=p>)</span> <span class=nx>fetchData</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>url</span><span class=p>,</span> <span class=nx>method</span><span class=p>,</span> <span class=nx>body</span><span class=p>,</span> <span class=nx>fetchStatus</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=nx>fetchStatus</span><span class=p>,</span> <span class=nx>fetchResult</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div><h2 id=type--interface>Type & interface</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-ts"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Book</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Book</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/typescript/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/overview/>Overview</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/typescript/>Typescript</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/react-logic-reuse/>React Logic Reuse Example</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Haolin Yang</a></span>&nbsp;<span class=post-publish>published on <time datetime=2021-03-12>2021-03-12</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=content><h2 id=react-logic-extraction>React logic extraction</h2><p><a href=https://tyrangyang.github.io/TyrangYang_blog/react/#logic-extraction rel>Check this post</a></p><h2 id=example-code>Example code</h2><p>This example demonstrate one single feature using four different feature to archive code split</p><p>Code running there: <a href=../html/HOC_HOOK_RENDER_PROPS/HOC_HOOK_RENDER_PROPS.html target=_blank>&ndash;>Link&lt;&ndash;</a></p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-jsx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useState</span><span class=p>,</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=nx>React</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Styles</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>redBorder</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>border</span><span class=o>:</span> <span class=s1>&#39;1px solid #f00&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MouseDisplay</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>Mouse</span> <span class=nx>at</span> <span class=nx>x</span><span class=o>:</span> <span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=p>;</span> <span class=nx>y</span><span class=o>:</span> <span class=p>{</span><span class=nx>y</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MouseDisplay2</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>color</span><span class=o>:</span> <span class=s1>&#39;teal&#39;</span> <span class=p>}}&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>Mouse</span> <span class=nx>at</span> <span class=nx>x</span><span class=o>:</span> <span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=p>;</span> <span class=nx>y</span><span class=o>:</span> <span class=p>{</span><span class=nx>y</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Normal
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>MouseInfoAndDisplay</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>setX</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>setY</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>handleMove</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setX</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientX</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>setY</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>style</span><span class=o>=</span><span class=p>{</span><span class=nx>Styles</span><span class=p>.</span><span class=nx>redBorder</span><span class=p>}</span> <span class=na>onMouseMove</span><span class=o>=</span><span class=p>{</span><span class=nx>handleMove</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>MouseDisplay</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// HOC
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>withMouseInfo</span> <span class=o>=</span> <span class=p>(</span><span class=nx>Component</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>setX</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>setY</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>handleMove</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>setX</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientX</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>setY</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>style</span><span class=o>=</span><span class=p>{</span><span class=nx>Styles</span><span class=p>.</span><span class=nx>redBorder</span><span class=p>}</span> <span class=na>onMouseMove</span><span class=o>=</span><span class=p>{</span><span class=nx>handleMove</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>Component</span> <span class=p>{</span><span class=na>...props</span><span class=p>}</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>HOCMouseDisplay</span> <span class=o>=</span> <span class=nx>withMouseInfo</span><span class=p>(</span><span class=nx>MouseDisplay</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>HOCMouseDisplay2</span> <span class=o>=</span> <span class=nx>withMouseInfo</span><span class=p>(</span><span class=nx>MouseDisplay2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Render Props
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MouseRenderProps</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>render</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>setX</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>setY</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>handleMove</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setX</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientX</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>setY</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>style</span><span class=o>=</span><span class=p>{</span><span class=nx>Styles</span><span class=p>.</span><span class=nx>redBorder</span><span class=p>}</span> <span class=na>onMouseMove</span><span class=o>=</span><span class=p>{</span><span class=nx>handleMove</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=nx>render</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>Mouse</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>MouseRenderProps</span> <span class=na>render</span><span class=o>=</span><span class=p>{(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>&lt;</span><span class=nt>MouseDisplay</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y</span><span class=p>}</span> <span class=p>/&gt;}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>MouseRenderProps</span>
</span></span><span class=line><span class=cl>                <span class=na>render</span><span class=o>=</span><span class=p>{(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>&lt;</span><span class=nt>MouseDisplay2</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y</span><span class=p>}</span> <span class=p>/&gt;}</span>
</span></span><span class=line><span class=cl>            <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Customize HOOK
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>useMouseState</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>setX</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>y</span><span class=p>,</span> <span class=nx>setY</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>node</span><span class=p>,</span> <span class=nx>setNode</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>handleMove</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setX</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientX</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>setY</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>clientY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>node</span> <span class=o>!==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>node</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;mousemove&#39;</span><span class=p>,</span> <span class=nx>handleMove</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>node</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>setNode</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>MouseUsingHook</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>x1</span><span class=p>,</span> <span class=nx>y1</span><span class=p>,</span> <span class=nx>ref1</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useMouseState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>x2</span><span class=p>,</span> <span class=nx>y2</span><span class=p>,</span> <span class=nx>ref2</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useMouseState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref1</span><span class=p>}</span> <span class=na>style</span><span class=o>=</span><span class=p>{</span><span class=nx>Styles</span><span class=p>.</span><span class=nx>redBorder</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>MouseDisplay</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x1</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y1</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref2</span><span class=p>}</span> <span class=na>style</span><span class=o>=</span><span class=p>{</span><span class=nx>Styles</span><span class=p>.</span><span class=nx>redBorder</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>MouseDisplay2</span> <span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=nx>x2</span><span class=p>}</span> <span class=na>y</span><span class=o>=</span><span class=p>{</span><span class=nx>y2</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>            <span class=na>style</span><span class=o>=</span><span class=p>{{</span>
</span></span><span class=line><span class=cl>                <span class=nx>display</span><span class=o>:</span> <span class=s1>&#39;flex&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>flexDirection</span><span class=o>:</span> <span class=s1>&#39;column&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>height</span><span class=o>:</span> <span class=s1>&#39;100vh&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>justifyContent</span><span class=o>:</span> <span class=s1>&#39;space-around&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>Normal</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>MouseInfoAndDisplay</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>HOC</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>HOCMouseDisplay</span> <span class=p>/&gt;</span> <span class=p>&lt;</span><span class=nt>HOCMouseDisplay2</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>Render</span> <span class=nx>Props</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>Mouse</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>Hook</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>MouseUsingHook</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/react-logic-reuse/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/web/>Web</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/react/>React</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/useful-post-archive/>Useful Post Archive</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2021-02-27>2021-02-27</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/archive/><i class="far fa-folder fa-fw" aria-hidden=true></i>Archive</a></span></div><div class=content><h2 id=react>React</h2><p><a href=https://tyrangyang.github.io/TyrangYang_blog/react-posts-archive/ rel>&ndash;><strong>Look this post</strong>&lt;&ndash;</a></p><h2 id=web-basic>WEB basic</h2><h3 id=please-stop-using-local-storage>Please Stop Using Local Storage</h3><p><a href=https://www.rdegges.com/2018/please-stop-using-local-storage/ target=_blank rel="noopener noreffer">https://www.rdegges.com/2018/please-stop-using-local-storage/</a></p><h3 id=jwt-authentication-when-and-how-to-use-it>JWT authentication: When and how to use it</h3><p><a href="https://blog.logrocket.com/jwt-authentication-best-practices/#:~:text=A%20JWT%20needs%20to%20be,storage%20%28or%20session%20storage%29" target=_blank rel="noopener noreffer">https://blog.logrocket.com/jwt-authentication-best-practices/#:~:text=A%20JWT%20needs%20to%20be,storage%20(or%20session%20storage)</a>.</p><h2 id=graphql>Graphql</h2><h3 id=dispatch-this-using-apollo-client-3-as-a-state-management-solution>Dispatch This: Using Apollo Client 3 as a State Management Solution</h3><p><a href=https://www.apollographql.com/blog/dispatch-this-using-apollo-client-3-as-a-state-management-solution/ target=_blank rel="noopener noreffer">https://www.apollographql.com/blog/dispatch-this-using-apollo-client-3-as-a-state-management-solution/</a></p><h3 id=apollo-client-update-cache-when-delete-an-item-from-list>Apollo Client update cache when delete an item from list</h3><p><a href=https://github.com/apollographql/apollo-client/issues/6451#issuecomment-775242381 target=_blank rel="noopener noreffer">https://github.com/apollographql/apollo-client/issues/6451#issuecomment-775242381</a></p><h3 id=several-things-for-graphql-security>Several things for Graphql Security</h3><p><a href=https://ithelp.ithome.com.tw/articles/10208008 target=_blank rel="noopener noreffer">https://ithelp.ithome.com.tw/articles/10208008</a></p><h3 id=should-i-put-usequery-inside-a-useeffect-and-should-i-store-returned-data-in-state>should I put useQuery inside a useEffect and should I store returned data in state?</h3><p><a href=https://github.com/trojanowski/react-apollo-hooks/issues/158 target=_blank rel="noopener noreffer">https://github.com/trojanowski/react-apollo-hooks/issues/158</a></p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/useful-post-archive/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/html/>Html</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/html-effect/>HTML Effect with vanilla html js css</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2020-12-14>2020-12-14</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/note/><i class="far fa-folder fa-fw" aria-hidden=true></i>Note</a></span></div><div class=content><h2 id=modal-box>Modal box</h2><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/modal.html rel>Demo</a></p></blockquote><h2 id=cursor--hover-effect>Cursor & hover effect</h2><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/cursorHover.html rel>Demo</a></p></blockquote><h2 id=pure-css-hamburger-button>Pure Css hamburger button</h2><p>This is a hamburger button using pure css to style it.</p><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/hamburgerBtnManu.html rel>Demo</a></p></blockquote><h2 id=loading>Loading</h2><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/loading.html rel>Demo</a></p></blockquote><h2 id=sidebar>Sidebar</h2><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/sidebar.html rel>Demo</a></p></blockquote><h2 id=profile>Profile</h2><blockquote><p><a href=https://tyrangyang.github.io/TyrangYang_blog/html/htmlEffect/profile.html rel>Demo</a></p></blockquote></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/html-effect/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/html/>Html</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/css/>Css</a>,&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/javascript/>Javascript</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=https://tyrangyang.github.io/TyrangYang_blog/webpack-overview/>Webpack Overview</a></h1><div class=post-meta><span class=post-author><a href=https://tyrangyang.github.io/TyrangYang_blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=2020-12-09>2020-12-09</time></span>&nbsp;<span class=post-category>included in <a href=https://tyrangyang.github.io/TyrangYang_blog/categories/overview/><i class="far fa-folder fa-fw" aria-hidden=true></i>Overview</a></span></div><div class=content><p>webpack is a static module bundler for modern JavaScript applications.</p><p>Document: <a href=https://webpack.js.org/concepts/ target=_blank rel="noopener noreffer">https://webpack.js.org/concepts/</a></p><h2 id=installation>Installation</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>npm i -D webpack webpack-cli</span></span></code></pre></div></div><h2 id=webpack-core-concept>webpack core concept</h2><h3 id=entry>Entry</h3><p>An entry point indicates which module webpack should use to <strong>begin</strong> building out its internal dependency graph. webpack will figure out which other modules and libraries that entry point depends on (directly and indirectly).</p></div><div class=post-footer><a href=https://tyrangyang.github.io/TyrangYang_blog/webpack-overview/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/tags/webpack/>Webpack</a></div></div></article><ul class=pagination><li class="page-item active"><span class=page-link><a href=https://tyrangyang.github.io/TyrangYang_blog/>1</a></span></li><li class=page-item><span class=page-link><a href=https://tyrangyang.github.io/TyrangYang_blog/page/2/>2</a></span></li><li class=page-item><span class=page-link><a href=https://tyrangyang.github.io/TyrangYang_blog/page/3/>3</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=https://tyrangyang.github.io/TyrangYang_blog/page/9/>9</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://tyrangyang.github.io/TyrangYang_blog/ target=_blank>xxxx</a></span>&nbsp;|&nbsp;<span class=license><a rel=license style=position:relative;top:3px href=http://creativecommons.org/licenses/by-nc-nd/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png></a><br>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-nd/4.0/>Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@5.20.2/dist/lite/builds/browser.umd.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script>window.config={data:{"id-1":"Stay Home & Be safe!"},search:{algoliaAppID:"QXEV52XWDS",algoliaIndex:"blog",algoliaSearchKey:"db56d05ebbeed337adca1ef261004dcc",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script src=https://tyrangyang.github.io/TyrangYang_blog/js/theme.min.js></script></body></html>